# AIå¯¹è¯ç³»ç»Ÿ - å®Œæ•´é¡¹ç›®è¯´æ˜

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„AIå¯¹è¯ç³»ç»Ÿï¼ŒåŒ…å«ç”¨æˆ·è®¤è¯ã€ä¼šè¯ç®¡ç†å’Œå®æ—¶AIå¯¹è¯åŠŸèƒ½ã€‚é¡¹ç›®é‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ã€‚

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ cooking-chat-web/              # å‰ç«¯é¡¹ç›®ï¼ˆReactï¼‰
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ pages/                 # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Login.jsx         # ç™»å½•é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ Register.jsx      # æ³¨å†Œé¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatPage.jsx      # å¯¹è¯é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ Auth.css          # è®¤è¯æ ·å¼
â”‚   â”‚   â”‚   â””â”€â”€ ChatPage.css      # å¯¹è¯æ ·å¼
â”‚   â”‚   â”œâ”€â”€ App.jsx               # åº”ç”¨ä¸»ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ main.jsx              # å…¥å£æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ index.css             # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ index.html                # HTMLæ¨¡æ¿
â”‚   â”œâ”€â”€ vite.config.js            # Viteé…ç½®
â”‚   â”œâ”€â”€ package.json              # ä¾èµ–é…ç½®
â”‚   â”œâ”€â”€ README.md                 # å‰ç«¯æ–‡æ¡£
â”‚   â”œâ”€â”€ DEPLOYMENT.md             # éƒ¨ç½²æŒ‡å—
â”‚   â”œâ”€â”€ start.sh                  # Linuxå¯åŠ¨è„šæœ¬
â”‚   â””â”€â”€ start.bat                 # Windowså¯åŠ¨è„šæœ¬
â”‚
â”œâ”€â”€ src/main/java/com/cooking/    # åç«¯é¡¹ç›®ï¼ˆSpring Bootï¼‰
â”‚   â”œâ”€â”€ controller/chat/
â”‚   â”‚   â”œâ”€â”€ AuthController.java           # ç”¨æˆ·è®¤è¯
â”‚   â”‚   â”œâ”€â”€ ChatController.java           # AIå¯¹è¯
â”‚   â”‚   â””â”€â”€ ConversationController.java   # ä¼šè¯ç®¡ç†
â”‚   â”œâ”€â”€ entity/
â”‚   â”‚   â”œâ”€â”€ Conversation.java             # ä¼šè¯å®ä½“
â”‚   â”‚   â”œâ”€â”€ Message.java                  # æ¶ˆæ¯å®ä½“
â”‚   â”‚   â””â”€â”€ User.java                     # ç”¨æˆ·å®ä½“
â”‚   â”œâ”€â”€ mapper/
â”‚   â”‚   â”œâ”€â”€ ConversationMapper.java
â”‚   â”‚   â””â”€â”€ MessageMapper.java
â”‚   â”œâ”€â”€ service/
â”‚   â”‚   â”œâ”€â”€ ConversationService.java
â”‚   â”‚   â””â”€â”€ impl/
â”‚   â”‚       â””â”€â”€ ConversationServiceImpl.java
â”‚   â””â”€â”€ dto/
â”‚       â”œâ”€â”€ UserLoginRequest.java
â”‚       â””â”€â”€ UserRegisterRequest.java
â”‚
â”œâ”€â”€ src/main/resources/
â”‚   â””â”€â”€ db/migration/
â”‚       â””â”€â”€ chat_tables.sql       # æ•°æ®åº“è„šæœ¬
â”‚
â”œâ”€â”€ CHAT_QUICKSTART.md            # å¿«é€Ÿå¯åŠ¨æŒ‡å—
â””â”€â”€ AI_CHAT_SYSTEM.md             # æœ¬æ–‡æ¡£
```

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### 1. ç”¨æˆ·è®¤è¯
- âœ… ç”¨æˆ·æ³¨å†Œï¼ˆå§“åã€æ‰‹æœºå·ã€é‚®ç®±ã€å¯†ç ï¼‰
- âœ… ç”¨æˆ·ç™»å½•ï¼ˆæ‰‹æœºå·+å¯†ç ï¼‰
- âœ… JWT Tokenè®¤è¯
- âœ… å®Œæ•´çš„è¡¨å•éªŒè¯
- âœ… å¯†ç åŠ å¯†å­˜å‚¨ï¼ˆBCryptï¼‰

### 2. ä¼šè¯ç®¡ç†
- âœ… åˆ›å»ºæ–°å¯¹è¯ï¼ˆæ¯ç”¨æˆ·æœ€å¤š10ä¸ªï¼‰
- âœ… æŸ¥çœ‹å¯¹è¯å†å²
- âœ… åˆ é™¤å¯¹è¯
- âœ… åˆ‡æ¢å¯¹è¯
- âœ… ä¼šè¯æŒä¹…åŒ–

### 3. AIå¯¹è¯
- âœ… æµå¼å“åº”ï¼ˆSSEï¼‰
- âœ… å®æ—¶æ˜¾ç¤ºAIå›å¤
- âœ… æ¶ˆæ¯å†å²ä¿å­˜
- âœ… å¤šè½®å¯¹è¯æ”¯æŒ
- âœ… è‡ªåŠ¨æ»šåŠ¨åˆ°æœ€æ–°æ¶ˆæ¯

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚
- JDK 8+
- Maven 3.6+
- MySQL 5.7+
- Node.js 16+
- npm æˆ– yarn

### 1. æ•°æ®åº“å‡†å¤‡

```bash
# æ‰§è¡Œæ•°æ®åº“è„šæœ¬
mysql -u root -p your_database < src/main/resources/db/migration/chat_tables.sql
```

### 2. å¯åŠ¨åç«¯

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•
mvn spring-boot:run
```

åç«¯å°†åœ¨ http://localhost:8080 å¯åŠ¨

### 3. å¯åŠ¨å‰ç«¯

**Linux/Mac:**
```bash
cd cooking-chat-web
chmod +x start.sh
./start.sh
```

**Windows:**
```bash
cd cooking-chat-web
start.bat
```

**æˆ–æ‰‹åŠ¨å¯åŠ¨:**
```bash
cd cooking-chat-web
npm install
npm run dev
```

å‰ç«¯å°†åœ¨ http://localhost:3000 å¯åŠ¨

### 4. è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼šhttp://localhost:3000

## ğŸ“¡ APIæ¥å£

### è®¤è¯æ¥å£

| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/auth/register` | POST | ç”¨æˆ·æ³¨å†Œ |
| `/api/auth/login` | POST | ç”¨æˆ·ç™»å½• |

### ä¼šè¯æ¥å£

| æ¥å£ | æ–¹æ³• | è¯´æ˜ | éœ€è¦Token |
|------|------|------|-----------|
| `/api/conversation/create` | POST | åˆ›å»ºä¼šè¯ | âœ“ |
| `/api/conversation/list` | GET | è·å–ä¼šè¯åˆ—è¡¨ | âœ“ |
| `/api/conversation/{id}/messages` | GET | è·å–æ¶ˆæ¯åˆ—è¡¨ | âœ“ |
| `/api/conversation/message` | POST | ä¿å­˜æ¶ˆæ¯ | âœ“ |
| `/api/conversation/{id}` | DELETE | åˆ é™¤ä¼šè¯ | âœ“ |

### AIå¯¹è¯æ¥å£

| æ¥å£ | æ–¹æ³• | è¯´æ˜ | éœ€è¦Token |
|------|------|------|-----------|
| `/api/chat/stream` | POST | æµå¼å¯¹è¯ | âœ“ |
| `/api/chat/sync` | POST | åŒæ­¥å¯¹è¯ | âœ“ |

## ğŸ—„ï¸ æ•°æ®åº“è¡¨

### userï¼ˆç”¨æˆ·è¡¨ï¼‰
- æ–°å¢å­—æ®µï¼š`email`ï¼ˆé‚®ç®±ï¼‰ã€`password`ï¼ˆå¯†ç ï¼‰

### conversationï¼ˆä¼šè¯è¡¨ï¼‰
- `id` - ä¸»é”®
- `user_id` - ç”¨æˆ·ID
- `title` - ä¼šè¯æ ‡é¢˜
- `create_time` - åˆ›å»ºæ—¶é—´
- `update_time` - æ›´æ–°æ—¶é—´
- `is_deleted` - åˆ é™¤æ ‡è®°

### messageï¼ˆæ¶ˆæ¯è¡¨ï¼‰
- `id` - ä¸»é”®
- `conversation_id` - ä¼šè¯ID
- `sender` - å‘é€æ–¹ï¼ˆUSER/AI/SYSTEMï¼‰
- `content` - æ¶ˆæ¯å†…å®¹
- `send_time` - å‘é€æ—¶é—´
- `message_type` - æ¶ˆæ¯ç±»å‹ï¼ˆTEXT/IMAGE/FILEï¼‰

## ğŸ”§ æŠ€æœ¯æ ˆ

### åç«¯
- **æ¡†æ¶**: Spring Boot 2.x
- **ORM**: MyBatis Plus
- **è®¤è¯**: JWT
- **å¯†ç åŠ å¯†**: BCrypt
- **æµå¼å“åº”**: SSE (Server-Sent Events)
- **æ•°æ®åº“**: MySQL

### å‰ç«¯
- **æ¡†æ¶**: React 18
- **æ„å»ºå·¥å…·**: Vite
- **æ ·å¼**: CSS3
- **HTTP**: Fetch API
- **æµå¼æ¥æ”¶**: EventSource (SSE)

## ğŸ“ è¡¨å•éªŒè¯è§„åˆ™

### æ³¨å†Œ
- **å§“å**: å¿…å¡«ï¼Œä¸è¶…è¿‡10ä½
- **æ‰‹æœºå·**: å¿…å¡«ï¼Œ11ä½æ•°å­—ï¼Œ1å¼€å¤´
- **é‚®ç®±**: å¿…å¡«ï¼Œç¬¦åˆé‚®ç®±æ ¼å¼
- **å¯†ç **: å¿…å¡«ï¼Œè‡³å°‘8ä½ï¼Œä¸èƒ½ä¸ºçº¯æ•°å­—

### ç™»å½•
- **æ‰‹æœºå·**: å¿…å¡«ï¼Œ11ä½æ•°å­—ï¼Œ1å¼€å¤´
- **å¯†ç **: å¿…å¡«

## ğŸ”’ å®‰å…¨ç‰¹æ€§

1. **å¯†ç åŠ å¯†**: ä½¿ç”¨BCryptåŠ å¯†å­˜å‚¨
2. **JWTè®¤è¯**: æ‰€æœ‰æ•æ„Ÿæ¥å£éœ€è¦Token
3. **è¡¨å•éªŒè¯**: å‰åç«¯åŒé‡éªŒè¯
4. **SQLæ³¨å…¥é˜²æŠ¤**: ä½¿ç”¨MyBatis Pluså‚æ•°åŒ–æŸ¥è¯¢
5. **XSSé˜²æŠ¤**: å‰ç«¯è¾“å…¥è¿‡æ»¤

## ğŸ“š æ–‡æ¡£

- [å¿«é€Ÿå¯åŠ¨æŒ‡å—](./CHAT_QUICKSTART.md) - è¯¦ç»†çš„å¯åŠ¨æ­¥éª¤
- [å‰ç«¯README](./cooking-chat-web/README.md) - å‰ç«¯é¡¹ç›®è¯´æ˜
- [éƒ¨ç½²æŒ‡å—](./cooking-chat-web/DEPLOYMENT.md) - ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

## ğŸ› å¸¸è§é—®é¢˜

### 1. å‰ç«¯æ— æ³•è¿æ¥åç«¯
- æ£€æŸ¥åç«¯æ˜¯å¦å¯åŠ¨ï¼ˆ8080ç«¯å£ï¼‰
- æ£€æŸ¥vite.config.jsä»£ç†é…ç½®
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯

### 2. TokenéªŒè¯å¤±è´¥
- æ£€æŸ¥localStorageä¸­æ˜¯å¦æœ‰token
- å°è¯•é‡æ–°ç™»å½•
- æ£€æŸ¥tokenæ˜¯å¦è¿‡æœŸ

### 3. ä¼šè¯åˆ›å»ºå¤±è´¥
- æ£€æŸ¥æ˜¯å¦å·²è¾¾åˆ°10ä¸ªä¼šè¯ä¸Šé™
- æ£€æŸ¥æ•°æ®åº“è¿æ¥
- æŸ¥çœ‹åç«¯æ—¥å¿—

### 4. AIå“åº”å¤±è´¥
- æ£€æŸ¥LlmServiceå®ç°
- ç¡®è®¤å¤§æ¨¡å‹APIé…ç½®
- æŸ¥çœ‹åç«¯æ—¥å¿—

### 5. æ•°æ®åº“è¿æ¥å¤±è´¥
- æ£€æŸ¥MySQLæœåŠ¡çŠ¶æ€
- ç¡®è®¤æ•°æ®åº“é…ç½®æ­£ç¡®
- æ£€æŸ¥æ•°æ®åº“ç”¨æˆ·æƒé™

## ğŸ”„ å¼€å‘æµç¨‹

### æ·»åŠ æ–°åŠŸèƒ½
1. åç«¯ï¼šåˆ›å»ºControllerã€Serviceã€Mapper
2. å‰ç«¯ï¼šåˆ›å»ºé¡µé¢ç»„ä»¶å’Œæ ·å¼
3. æµ‹è¯•ï¼šå•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
4. æ–‡æ¡£ï¼šæ›´æ–°APIæ–‡æ¡£

### ä»£ç è§„èŒƒ
- åç«¯ï¼šéµå¾ªé˜¿é‡Œå·´å·´Javaå¼€å‘è§„èŒƒ
- å‰ç«¯ï¼šä½¿ç”¨ESLintå’ŒPrettier
- æäº¤ï¼šä½¿ç”¨è¯­ä¹‰åŒ–æäº¤ä¿¡æ¯

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### å‰ç«¯
- ä»£ç åˆ†å‰²ï¼ˆViteè‡ªåŠ¨ï¼‰
- èµ„æºå‹ç¼©
- æ‡’åŠ è½½
- è™šæ‹Ÿæ»šåŠ¨ï¼ˆæ¶ˆæ¯åˆ—è¡¨ï¼‰

### åç«¯
- æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–
- è¿æ¥æ± é…ç½®
- ç¼“å­˜ç­–ç•¥
- å¼‚æ­¥å¤„ç†

## ğŸš¢ éƒ¨ç½²

### å¼€å‘ç¯å¢ƒ
```bash
# åç«¯
mvn spring-boot:run

# å‰ç«¯
cd cooking-chat-web
npm run dev
```

### ç”Ÿäº§ç¯å¢ƒ
```bash
# åç«¯
mvn clean package
java -jar target/cooking-*.jar

# å‰ç«¯
cd cooking-chat-web
npm run build
# ä½¿ç”¨Nginxéƒ¨ç½²distç›®å½•
```

è¯¦è§ [éƒ¨ç½²æŒ‡å—](./cooking-chat-web/DEPLOYMENT.md)

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·ï¼š
1. æŸ¥çœ‹æ–‡æ¡£
2. æ£€æŸ¥å¸¸è§é—®é¢˜
3. æŸ¥çœ‹æ—¥å¿—
4. è”ç³»å¼€å‘å›¢é˜Ÿ

## ğŸ“„ è®¸å¯è¯

MIT License

---

**ç¥ä½¿ç”¨æ„‰å¿«ï¼** ğŸ‰
